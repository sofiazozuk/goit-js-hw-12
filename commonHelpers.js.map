{"version":3,"file":"commonHelpers.js","sources":["../src/img/x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__655c9695__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport icon from './img/x-octagon.svg';\n\nimport axios from 'axios';\n\nconst userInput = document.querySelector('.data-select');\nconst userList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst addButton = document.querySelector('.add-button');\n\nlet userInputForAdd;\nlet page = 1;\nlet totalPages;\n\nconst searchParams = new URLSearchParams({\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 40,\n  page: 1,\n});\nconst perPageValue = searchParams.get('per_page');\n\nuserInput.addEventListener('submit', e => {\n  e.preventDefault();\n  loader.classList.toggle('active');\n  addButton.classList.add('active');\n  userInputForAdd = '';\n  const userInputValue = userInput.elements.request.value.trim();\n  userList.innerHTML = '';\n  page = 1;\n  searchParams.set('page', page);\n\n  userInputForAdd = userInputValue;\n\n  fetchGallery(userInputValue)\n    .then(({ data }) => {\n      renderGallery(data);\n    })\n    .catch(() => {\n      iziToast.error({\n        message: 'Something wrong. Please try again later!',\n        messageColor: '#FAFAFB',\n        messageSize: '16',\n        messageLineHeight: '20',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        iconUrl: icon,\n        icon: 'fa-regular',\n        iconColor: '#FAFAFB',\n        maxWidth: '500',\n        transitionIn: 'bounceInLeft',\n      });\n    })\n    .finally(() => {\n      loader.classList.toggle('active');\n      if (page <= totalPages) {\n        addButton.classList.remove('active');\n      }\n      userInput.reset();\n    });\n});\n\nasync function fetchGallery(userRequest) {\n  return await axios.get(\n    `https://pixabay.com/api/?key=41825347-2a0e6255edbe790f7737a6334&q=${userRequest}&${searchParams}`\n  );\n}\n\nfunction renderGallery(data) {\n  totalPages = Math.ceil(data.totalHits / perPageValue);\n  if (data.totalHits <= 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching </br> your search query. Please try again!',\n      messageColor: '#FAFAFB',\n      messageSize: '16',\n      messageLineHeight: '20',\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      iconUrl: icon,\n      iconColor: '#FAFAFB',\n      maxWidth: '500',\n      closeOnClick: true,\n      close: false,\n    });\n  } else if (page > totalPages) {\n    iziToast.error({\n      message: 'We are sorry, but you have reached the end of search results.',\n      messageColor: '#FAFAFB',\n      messageSize: '16',\n      messageLineHeight: '20',\n      position: 'topRight',\n      backgroundColor: '#91e3fa',\n      iconUrl: icon,\n      iconColor: '#FAFAFB',\n      maxWidth: '500',\n      closeOnClick: true,\n      close: false,\n    });\n  }\n\n  const markup = data.hits\n    .map(hit => {\n      return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n    \t      <img\n\t\t          class=\"gallery-image\"\n\t\t          src=\"${hit.webformatURL}\"\n\t\t          alt=\"${hit.tags}\"\n              width=\"360\"\n              height=\"200\"\n              ;\n    \t      />\n            <ul class=\"info-list\">\n              <li class=\"info-item\">\n                <h class=\"item-title\">Likes</h>\n                <p class=\"item-content\">${hit.likes}</p>\n              </li>\n              <li class=\"info-item\">\n                <h class=\"item-title\">Views</h>\n                <p class=\"item-content\">${hit.views}</p>\n              </li>\n              <li class=\"info-item\">\n                <h class=\"item-title\">Comments</h>\n                <p class=\"item-content\">${hit.comments}</p>\n              </li>\n              <li class=\"info-item\">\n                <h class=\"item-title\">Downloads</h>\n                <p class=\"item-content\">${hit.downloads}</p>\n              </li>\n            </ul>\n  \t\t    </a>\n        </li>`;\n    })\n    .join('');\n  userList.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery-list a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\naddButton.addEventListener('click', evt => {\n  evt.preventDefault();\n  loader.classList.toggle('active');\n  addButton.classList.add('active');\n  page += 1;\n  searchParams.set('page', page);\n\n  fetchGallery(userInputForAdd)\n    .then(({ data }) => {\n      renderGallery(data);\n      const element = document.querySelector('.gallery-item');\n      const rect = element.getBoundingClientRect().height * 2;\n      window.scrollBy({\n        top: rect,\n        left: 0,\n        behavior: 'smooth',\n      });\n    })\n    .catch(() => {\n      iziToast.error({\n        message: 'Something wrong. Please try again later!',\n        messageColor: '#FAFAFB',\n        messageSize: '16',\n        messageLineHeight: '20',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        iconUrl: icon,\n        icon: 'fa-regular',\n        iconColor: '#FAFAFB',\n        maxWidth: '500',\n        transitionIn: 'bounceInLeft',\n      });\n    })\n    .finally(() => {\n      loader.classList.toggle('active');\n      if (page <= totalPages) {\n        addButton.classList.remove('active');\n      }\n      userInput.reset();\n    });\n});\n"],"names":["icon","userInput","userList","loader","addButton","userInputForAdd","page","totalPages","searchParams","perPageValue","e","userInputValue","fetchGallery","data","renderGallery","iziToast","userRequest","axios","markup","hit","SimpleLightbox","evt","rect"],"mappings":"owBAAA,MAAeA,EAAA,+CCUTC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAW,SAAS,cAAc,eAAe,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAY,SAAS,cAAc,aAAa,EAEtD,IAAIC,EACAC,EAAO,EACPC,EAEJ,MAAMC,EAAe,IAAI,gBAAgB,CACvC,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAM,CACR,CAAC,EACKC,EAAeD,EAAa,IAAI,UAAU,EAEhDP,EAAU,iBAAiB,SAAUS,GAAK,CACxCA,EAAE,eAAc,EAChBP,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAU,UAAU,IAAI,QAAQ,EAChCC,EAAkB,GAClB,MAAMM,EAAiBV,EAAU,SAAS,QAAQ,MAAM,OACxDC,EAAS,UAAY,GACrBI,EAAO,EACPE,EAAa,IAAI,OAAQF,CAAI,EAE7BD,EAAkBM,EAElBC,EAAaD,CAAc,EACxB,KAAK,CAAC,CAAE,KAAAE,KAAW,CAClBC,EAAcD,CAAI,CACxB,CAAK,EACA,MAAM,IAAM,CACXE,EAAS,MAAM,CACb,QAAS,2CACT,aAAc,UACd,YAAa,KACb,kBAAmB,KACnB,SAAU,WACV,gBAAiB,UACjB,QAASf,EACT,KAAM,aACN,UAAW,UACX,SAAU,MACV,aAAc,cACtB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbG,EAAO,UAAU,OAAO,QAAQ,EAC5BG,GAAQC,GACVH,EAAU,UAAU,OAAO,QAAQ,EAErCH,EAAU,MAAK,CACrB,CAAK,CACL,CAAC,EAED,eAAeW,EAAaI,EAAa,CACvC,OAAO,MAAMC,EAAM,IACjB,qEAAqED,KAAeR,GACxF,CACA,CAEA,SAASM,EAAcD,EAAM,CAC3BN,EAAa,KAAK,KAAKM,EAAK,UAAYJ,CAAY,EAChDI,EAAK,WAAa,EACpBE,EAAS,MAAM,CACb,QACE,iFACF,aAAc,UACd,YAAa,KACb,kBAAmB,KACnB,SAAU,WACV,gBAAiB,UACjB,QAASf,EACT,UAAW,UACX,SAAU,MACV,aAAc,GACd,MAAO,EACb,CAAK,EACQM,EAAOC,GAChBQ,EAAS,MAAM,CACb,QAAS,gEACT,aAAc,UACd,YAAa,KACb,kBAAmB,KACnB,SAAU,WACV,gBAAiB,UACjB,QAASf,EACT,UAAW,UACX,SAAU,MACV,aAAc,GACd,MAAO,EACb,CAAK,EAGH,MAAMkB,EAASL,EAAK,KACjB,IAAIM,GACI;AAAA,0CAC6BA,EAAI;AAAA;AAAA;AAAA,mBAG3BA,EAAI;AAAA,mBACJA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAQmBA,EAAI;AAAA;AAAA;AAAA;AAAA,0CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,0CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,0CAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,cAKzC,EACA,KAAK,EAAE,EACVjB,EAAS,mBAAmB,YAAagB,CAAM,EAE9B,IAAIE,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CAEAhB,EAAU,iBAAiB,QAASiB,GAAO,CACzCA,EAAI,eAAc,EAClBlB,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAU,UAAU,IAAI,QAAQ,EAChCE,GAAQ,EACRE,EAAa,IAAI,OAAQF,CAAI,EAE7BM,EAAaP,CAAe,EACzB,KAAK,CAAC,CAAE,KAAAQ,KAAW,CAClBC,EAAcD,CAAI,EAElB,MAAMS,EADU,SAAS,cAAc,eAAe,EACjC,sBAAqB,EAAG,OAAS,EACtD,OAAO,SAAS,CACd,IAAKA,EACL,KAAM,EACN,SAAU,QAClB,CAAO,CACP,CAAK,EACA,MAAM,IAAM,CACXP,EAAS,MAAM,CACb,QAAS,2CACT,aAAc,UACd,YAAa,KACb,kBAAmB,KACnB,SAAU,WACV,gBAAiB,UACjB,QAASf,EACT,KAAM,aACN,UAAW,UACX,SAAU,MACV,aAAc,cACtB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbG,EAAO,UAAU,OAAO,QAAQ,EAC5BG,GAAQC,GACVH,EAAU,UAAU,OAAO,QAAQ,EAErCH,EAAU,MAAK,CACrB,CAAK,CACL,CAAC"}